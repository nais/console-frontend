# Console frontend

ðŸ“š **[View Component Library (Storybook)](https://nais.io/console-frontend/)**

## Development

The following snippet contains the most important commands for development.

```bash
npm install
cp .env.example .env # Copy the example environment file
npm run build # Build the project
npm run dev # Starts a development server on port 5173

npm run check # Check for various issues
npm run lint # Lint the code
npm run format # Format the code (Or use a Prettier extension in  your editor)
npm run test # Run tests with Vitest
npm run lockfile-lint # Validate package-lock.json security
```

## Dependency Management

This project uses enhanced security measures for dependency management:

- **npm-check-updates**: Configured with a 14-day cooldown period to protect against supply chain attacks (see `.ncurc.cjs`)
- **lockfile-lint**: Validates package-lock.json for security issues - HTTPS, integrity checks, hostname verification (see `.lockfile-lintrc.json`)
- **npq**: Recommended for package installation to check for security issues before installing

```bash
ncu -u # Update dependencies (respects 14-day cooldown)
npm run lockfile-lint # Validate lockfile security
```

### Using npq for safer installations

We recommend using [npq](https://github.com/lirantal/npq) instead of `npm install` to scan packages for security issues before installation:

```bash
# Install npq globally
npm install -g npq

# Alias npm to npq (add to your shell config: ~/.zshrc, ~/.bashrc, etc.)
alias npm='npq-hero'

# Now when you run npm install, it will use npq automatically
npm install <package-name>
```

```

## User

In production `api` uses oauth2 to authenticate users.

### Local user override

When running locally, the frontend will proxy requests to the locally running [backend](https://github.com/nais/api) through a Vite Proxy.
This proxy will add a special header for local development to specify which user to run as.

There's two well known users:

| User                        | Description                                          |
| --------------------------- | ---------------------------------------------------- |
| `dev.usersen@example.com`   | A user with tenant wide permissions, but owns a team |
| `admin.usersen@example.com` | A user with all permissions                          |

You can specify which user to run as through `.env`.
See `.env.example` for an example.

### Using OAUTH

To use the oauth flow, you need to configure `api` with correct credentials, and the user has to exist in the database.

## Code generated by GitHub Copilot

This repository uses GitHub Copilot to generate code.
```
