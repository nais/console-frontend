<script lang="ts">
	import VulnerabilityBadge from '$lib/icons/VulnerabilityBadge.svelte';
	import { Tooltip } from '@nais/ds-svelte-community';

	export let severity: string;
	export let count: number | undefined;

	function severityToColor(severity: string) {
		switch (severity) {
			case 'critical':
				return '#f86c6b';
			case 'high':
				return '#fd8b00';
			case 'medium':
				return '#ffc107';
			case 'low':
				return '#4dbd74';
			default:
				return '#777777';
		}
	}
</script>

{#if count === undefined}
	<Tooltip placement="right" content="No data found">
		<span>-</span>
	</Tooltip>
{:else if count > 0}
	<Tooltip placement="right" content="severity: {severity}">
		<VulnerabilityBadge text={String(count)} color={severityToColor(severity)} />
	</Tooltip>
{:else}
	<Tooltip placement="right" content="No vulnerabilities found, keep up the good work!">
		<code class="check">&check;</code>
	</Tooltip>
{/if}

<style>
	.check {
		font-size: 2rem;
		color: #4dbd74;
		text-align: center;
		padding-left: 4px;
	}
</style>
