<script lang="ts">
	import { PendingValue } from '$houdini';
	import VulnerabilityBadge from '$lib/icons/VulnerabilityBadge.svelte';
	import { severityToColor } from '$lib/utils/vulnerabilities';
	import { Skeleton } from '@nais/ds-svelte-community';

	interface Props {
		severity: string;
		count: number | typeof PendingValue | undefined;
		size: string;
	}

	let { severity, count, size }: Props = $props();
</script>

{#if count === undefined}
	<span>-</span>
{:else if count === PendingValue}
	<Skeleton variant="circle" width={size} height={size} />
{:else if count > 0}
	<VulnerabilityBadge text={String(count)} color={severityToColor(severity)} {size} />
{:else}
	<code class="check">&check;</code>
{/if}

<style>
	.check {
		font-size: 2rem;
		color: #4dbd74;
		text-align: center;
		padding-left: 4px;
	}
</style>
