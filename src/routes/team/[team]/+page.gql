query TeamOverview($team: Slug!) @cache(policy: NetworkOnly) {
	team(slug: $team) {
		purpose
		activityLog(first: 1) {
			nodes {
				id
				...ActivityLogEntryFragment
			}
		}

		redisInstances(first: 20) {
			pageInfo {
				totalCount
			}
			nodes {
				id
				__typename
				name
				teamEnvironment {
					environment {
						name
					}
				}
				team {
					slug
				}
			}
		}
		workloads(first: 999) {
			nodes {
				__typename
				id
				name
				team {
					slug
				}
				teamEnvironment {
					environment {
						name
					}
				}

				status {
					errors {
						__typename
						level
						... on WorkloadStatusDeprecatedRegistry {
							name
							registry
							repository
							tag
						}
						... on WorkloadStatusSynchronizationFailing {
							detail
						}
						... on WorkloadStatusInvalidNaisYaml {
							detail
						}
						... on WorkloadStatusNoRunningInstances {
							level
						}
						... on WorkloadStatusFailedRun {
							detail
							name
						}
					}
				}
			}
		}
		...VulnerabilityOverviewFragment
	}
}
