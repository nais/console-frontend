query Image(
	$team: Slug!
	$env: String!
	$app: String!
	$orderBy: OrderBy = { field: SEVERITY, direction: DESC }
	$limit: Int
	$offset: Int
) @loading(cascade: false) {
	app(name: $app, team: $team, env: $env) {
		image {
			id @loading
			projectId
			version
			name
			digest
			rekorId
			summary @loading {
				id
				critical
				high
				medium
				low
				unassigned
				riskScore
			}
			workloadReferences @loading {
				id
				name
				team
				workloadType
				environment
				deployInfo {
					deployer
					timestamp
					commitSha
					url
				}
			}
			findings(limit: $limit, offset: $offset, orderBy: $orderBy) {
				pageInfo {
					totalCount
					hasNextPage
					hasPreviousPage
				}
				nodes @loading(count: 18, cascade: false) {
					id @loading
					componentId
					description
					packageUrl
					severity
					vulnerabilityId
					vulnId
					aliases {
						name
						source
					}
					isSuppressed
					state
					analysisTrail {
						id
						comments {
							comment
							onBehalfOf
							timestamp
						}
						isSuppressed
						state
					}
				}
			}
		}
	}
}
#query Image(
#	$dependencyTrackProjectId: String!
#	$orderBy: OrderBy = { field: SEVERITY, direction: DESC }
#	$limit: Int
#	$offset: Int
# @loading(cascade: false) {
#	dependencyTrackProject(projectId: $dependencyTrackProjectId) {
#		id @loading
#		projectId
#		version
#		name
#		digest
#		rekorId
#		summary @loading {
#			id
#			critical
#			high
#			medium
#			low
#			unassigned
#			riskScore
#		}
#		workloadReferences @loading {
#			id
#			name
#			team
#			workloadType
#			environment
#			deployInfo {
#				deployer
#				timestamp
#				commitSha
#				url
#			}
#		}
#		findings(limit: $limit, offset: $offset, orderBy: $orderBy) {
#			pageInfo {
#				totalCount
#				hasNextPage
#				hasPreviousPage
#			}
#			nodes @loading(count: 18, cascade: false) {
#				id @loading
#				componentId
#				description
#				packageUrl
#				severity
#				vulnerabilityId
#				vulnId
#				aliases {
#					name
#					source
#				}
#				isSuppressed
#				state
#				analysisTrail(projectId: $dependencyTrackProjectId) {
#					id
#					comments {
#						comment
#						onBehalfOf
#						timestamp
#					}
#					isSuppressed
#					state
#				}
#			}
#		}
#	}
#
