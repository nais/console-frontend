query TeamVulnerabilities(
	$team: Slug!
	$orderBy: OrderBy = { field: SEVERITY_CRITICAL, direction: DESC }
	$limit: Int
	$offset: Int
) @loading(count: 5, cascade: true) {
	team(slug: $team) {
		id
		environments {
			name
		}
		apps(limit: $limit, offset: $offset, orderBy: $orderBy) {
			pageInfo {
				totalCount
				hasNextPage
				hasPreviousPage
			}

			nodes @loading(count: 10) {
				name
				env {
					name
				}
				imageDetails {
					hasSbom
					summary {
						riskScore
						unassigned
						critical
						high
						medium
						low
					}
				}
			}
		}
		vulnerabilitiesSummary {
			riskScore
			critical
			high
			medium
			low
			bomCount
			unassigned
			coverage
			totalWorkloads
		}
	}
}
